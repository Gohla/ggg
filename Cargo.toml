cargo-features = ["named-profiles", "profile-overrides"]

[workspace]
members = [
  "core/common",
  "core/os",
  "core/gfx",
  "core/gfxc",
  "core/gui",
  "core/gui_widget",
  "core/app",
  "graphics/triangle",
  "graphics/quads",
  "graphics/cubes",
  "graphics/ray_tracing",
  "graphics/ray_box"
]

# Development profile: full debug information, some optimisations.
[profile.dev]
opt-level = 2
overflow-checks = true
debug-assertions = true
panic = "abort"
debug = true
split-debuginfo = "unpacked"
codegen-units = 8
lto = false
incremental = true

# Fast development profile: no debug information, some optimisations.
[profile.fastdev]
inherits = 'dev'
opt-level = 2
debug = false
# Fully optimize all dependencies, but not our own crates, to speed up compilation.
[profile.fastdev.package."*"]
opt-level = 3
[profile.fastdev.package."common"]
opt-level = 2
[profile.fastdev.package."os"]
opt-level = 2
[profile.fastdev.package."gfx"]
opt-level = 2
[profile.fastdev.package."gfxc"]
opt-level = 2
[profile.fastdev.package."gui"]
opt-level = 2
[profile.fastdev.package."gui_widget"]
opt-level = 2
[profile.fastdev.package."app"]
opt-level = 2
[profile.fastdev.package."triangle"]
opt-level = 2
[profile.fastdev.package."quads"]
opt-level = 2
[profile.fastdev.package."cubes"]
opt-level = 2
[profile.fastdev.package."ray_tracing"]
opt-level = 2
[profile.fastdev.package."ray_box"]
opt-level = 2

[profile.test]
inherits = 'fastdev'

# Release profile: full optimisations, including link-time optimisations.
[profile.release]
opt-level = 3
overflow-checks = false
debug-assertions = false
lto = true
debug = false

# Performance profiling profile: full debug information, full optimisations.
[profile.profile]
inherits = 'release'
debug = true
